<template>
    <div lwc:if={currentSize}>
        <div class="slds-p-around_medium">
            <lightning-tile>
                <h2 class="slds-text-heading_small slds-m-bottom_medium">Approvers</h2>
                <div class="slds-progress">
                    <ol class="slds-progress__list">                       
                        <template for:each={approvalSteps} for:item="approvalStep">
                            <template lwc:if={approvalStep.approved}>
                                <li key={approvalStep.approverId} class="slds-progress__item slds-is-completed">
                                    <c-popovers variant="brand">
                                        <div slot="value">
                                            <button class="slds-button slds-progress__marker slds-progress__marker_icon">
                                                <lightning-icon icon-name="utility:success" variant="success" size={currentSize}></lightning-icon>
                                            </button>
                                        </div>
                                        <div slot="header">
                                            <h1>{approvalStep.approver}</h1>
                                        </div>
                                        <div slot="body">
                                            {approvalStep.approver} has approved the request.
                                        </div>
                                    </c-popovers>
                                </li>
                            </template>
                            <template lwc:elseif={approvalStep.rejected}>
                                <li key={approvalStep.approverId} class="slds-progress__item slds-has-error">
                                    <c-popovers variant="brand">
                                        <div slot="value">
                                            <button class="slds-button slds-progress__marker slds-progress__marker_icon">
                                                <lightning-icon icon-name="utility:error" variant="error" size={currentSize}></lightning-icon>
                                            </button>
                                        </div>
                                        <div slot="header">
                                            <h1>{approvalStep.approver}</h1>
                                        </div>
                                        <div slot="body">
                                            {approvalStep.approver} has rejected the request.
                                        </div>
                                    </c-popovers>
                                </li>
                            </template>
                            <template lwc:elseif={approvalStep.isCurrentApprover}>
                                <li key={approvalStep.approverId} class="slds-progress__item slds-is-active">
                                    <c-popovers variant="brand">
                                        <div slot="value">
                                            <button class="slds-button slds-progress__marker slds-progress__marker_icon">
                                                <lightning-icon icon-name="utility:record" size={currentSize}></lightning-icon>
                                            </button>
                                        </div>
                                        <div slot="header">
                                            <h1>{approvalStep.approver}</h1>
                                        </div>
                                        <div slot="body">
                                            Waiting on your decision
                                        </div>
                                    </c-popovers>
                                    
                                </li>
                            </template>
                            <template lwc:else>
                                <li key={approvalStep.approverId} class="slds-progress__item">
                                    <c-popovers variant="brand">
                                        <div slot="value">
                                            <button class="slds-button slds-progress__marker slds-progress__marker_icon">
                                                <lightning-icon icon-name="utility:record" size={currentSize}></lightning-icon>
                                            </button>
                                        </div>
                                        <div slot="header">
                                            <h1>{approvalStep.approver}</h1>
                                        </div>
                                        <div slot="body">
                                            Waiting on {approvalStep.approver}s decision
                                        </div>
                                    </c-popovers>
                                </li>
                            </template>
                        </template> 
                    </ol>
                    <div class="slds-progress-bar slds-progress-bar_x-small">
                    </div>
                </div>
            </lightning-tile>
        </div>
    </div>
</template>